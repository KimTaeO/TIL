# Prometheus란
# Prometheus

프로메테우스는 SoundCloud 내부에서 구축한 오픈소스 모니터링 및 알림 툴킷이며, 메트릭을 시계열 데이터로 수집하고 저장한다. 또한 ```label```이라고 불리는 옵셔널인 "Key-Value" 형태의 데이터가 ```TimeStamp```와 함께 저장된다

## Prometheus의 기능

* Metric 수집
    * Exporter : 수집하려는 대상 서버에 설치하여 Promtheus에서 metric을 수집한다. 또한 단순히 HTTP GET으로 메트릭을 텍스트 형태로 프로메테우스에 리턴한다
        > 데이터를 수집하는 방식은 Pull 방식을 사용하며, 이 방식은 중앙 서버가 수집 대상 서버에서 데이터들 Scrap하는 것을 의미한다.
        > 이 방식에서는 중앙 서버가 수집할 서버들의 목록을 관리해야하는데, Prometheus에서는 이를 위해 Service Discovery 기능을 가지고 있다.

    * Retrival : 서비스 디스커버리 시스템으로부터 모니터링 대상 목록을 받아오고, exporter로부터 주기적으로 메트릭을 수집하는 모듈이다

* 수집한 데이터 저장
    * 수집된 정보는 별도의 데이터베이스를 사용하지 않고, 프로메테우스 내의 메모리와 로컬 디스크에 저장된다. 이는 설치가 매우 쉽다는 장점을 가지고 있지만 반대로 스케일링이 불가능하다. 시스템이 늘어나면 늘어날수록 메트릭을 저장할 공간들이 많이 필요해지는데, 이를 해결하려면 단순히 디스크 용량을 늘리는 방법밖에 없다

* 서빙
    * 저장된 메트릭들은 PromQL을 사용하여 조회할 수 있으며, 이를 외부 API나 프로메테우스 웹 콘솔을 이용해서 서빙할 수 있다.
    > 그라파나 등과 통합하여 대쉬보드 등을 구성하는 것이 가능하다