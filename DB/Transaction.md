# Transaction

하나의 작업을 수행하기 
더이상 쪼갤 수 없는 가장 작은 작업 단위이다

## 트랜잭션의 특징(ACID)
* Atomicity(원자성)
    * 하나의 작업이 모두 적용되거나 그렇지 않아야 한다
* Consistency(일관성)
    * 작업을 처리한 결과가 일관되어야 한다
* Isolation(독립성)
    * 하나의 트랜잭션은 다른 트랜잭션에 끼어들 수 없으며, 독립적이다
* Durability(지속성)
    * 수행된 작업은 데이터베이스에 영구적으로 반영되어야 한다

* ## Commit & Rollback
    * 트랜잭션이 성공하면 데이터베이스에 결과를 반영하기 위한 Commit을 한다
    * 작업 과정 도중에 하나의 연산이라도 실패하게 된다면 원자성에 의해 트랜잭션의 전체가 취소되어야 하므로 작업은 전체 취소하는 Rollback 연산을 한다

## 트랜잭션의 상태
트랜잭션의 상태는 크게 5가지로 나뉜다
* 활성화 : 트랜잭션이 작업을 시작하여 실행중인 상태
* 실패 : 트랜잭션에 오류가 발생하여 실행 중단된 상태
* 철회 : 트랜잭션이 정상적으로 수행되지 않아 Rollback연산을 수행한 상태
* 부분 완료 : 모든 트랜잭션이 정상적으로 수행된후 데이터베이스에 반영되기 전의 상태
* 완료 : 트랜잭션이 성공적으로 종료되어 데이터베이스에 반영된 상태

> SavePoint : 세이브포인트를 지정해 지정해 놓은 곳으로 연산을 롤백하는 것을 의미한다

## 트랜잭션 격리 수준
여러 개의 트랜잭션이 수행되고 있을 떄, 특정 트랜잭션이 변경하거나 조회하는 데이터에 대해 조회 허용 여부를 결정하는 것이다

* Serializable
    * 특정 트랜잭션이 사용중인 테이블의 모든 행을 접근할 수 없도록 잠근다
    * 가장 높은 데이터 정합성을 가지지만 단순한 SELECT 쿼리를 실행해도 다른 트랜잭션에서 데이터에 접근할 수 없게 된다
* Repeatable Read
    * 트랜잭션 내에서 특정 행 조회 시 항상 같은 데이터를 응답하는 것을 보장한다
    * 수정은 불가하지만 데이터를 삽입하는건 막지 않는다
* Read Commited
    * 커밋이 완료된 변경사항만 다른 트랜잭션에서 조회할 수 있도록 허용한다
    * 특정 트랜잭션에서 데이터가 변경되었더라도 커밋되지 않았다면 특정 트랜잭션 시작 전 데이터를 읽어온다
* Read Uncommited
    * 커밋이 되지 않은 데이터의 변경 내용을 다른 트랜잭션이 조회하는 것을 허용한다
    * 데이터 부정합이 발생할 확률은 높으나 성능이 빨라 집계 연산을 사용할 떄 주로 사용한다